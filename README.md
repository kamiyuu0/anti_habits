# Anti Habits
<img src=https://res.cloudinary.com/antihabits/image/upload/v1757773129/anti_habits_static_ogp_zg7q8j.png width=800>

## ■　サービス概要
Anti Habitsは悪習慣を取り除く手助けをするサービスです。
悪習慣を共有し、一定間隔で悪習慣をしていないか管理して目標達成を手助けします。
悪習慣を共有することで切磋琢磨できたり、自分以外のユーザに監視されてる錯覚を感じることで目標達成率を高められます。

悪習慣の例
- 休日の前日につい夜更かししてしまう
- お風呂にスマホを持ち込んでしまう
- ダイエットしたいのに大盛りを頼んでしまう

### サービスURL
https://anti-habits.com/

### ゲストユーザー
- メールアドレス：guest@example.com
- パスワード：password

## ■ 開発背景
自分自身、辞めたいと思っていてもついついやってしまっている習慣・悪い癖が多々ありました。
そのうちの1つに「お風呂にスマホを持ち込んで入浴中にYouTubeを見る」ことがあり、これを辞めたいとずっと思っていました。
妻の協力のもと監視してもらうことでスマホを持ち込むことがなくなり、今では入浴時間が自分を見つめ直したり深く思考する良い時間になっています。
このような悪習慣から効率良く脱却する手助けをしたいと思い、本アプリを考案しました。

## ■ ユーザー層について
- 勉強やバイト、部活動に忙しい学生
  - 少ない学生期間の中で悪習慣を取り除いて、自分がやりたいことにしっかり打ち込むために
- 学生を卒業し社会人になって間もない人
  - 学生時代よりできること・目標・責任も増えるので、より自己管理が大切になるので
- 目標・やりたいことはあるけど時間がないと思っている人
  - 今やっていることの中から惰性で行っている悪習慣を取り除けば少しは時間ができるかも？

## ■　サービスの利用イメージ
悪習慣を登録します。
一定期間毎にLINEに通知が来るので、 悪習慣を行ったかどうかアプリ上で入力を行います。
悪習慣とそれを行ったかどうかを共有することで、他のユーザーから擬似的に監視されている感覚になり、 悪習慣を取り除く手助けをしてくれます。
悪習慣を取り除くことで、自分がしたいことにより時間を使えるようになります。

## ■ 機能紹介

<table>
  <tr>
    <th>悪習慣一覧</th>
  </tr>
  <tr>
    <td><img width="800" alt="Image" src="https://github.com/user-attachments/assets/01cad3b9-e5f0-4674-9aa3-794daff89e72" /></td>
  </tr>
  <tr>
    <td>ユーザーの投稿をまとめて確認できます。</td>
  </tr>
</table>

<table>
  <tr>
    <th>ランキング</th>
  </tr>
  <tr>
    <td><img width="800" alt="Image" src="https://github.com/user-attachments/assets/0cb8bd91-27f4-4f4c-9e38-92feaaf973d2" /></td>
  </tr>
  <tr>
    <td>ユーザーの投稿の中で連続で悪習慣を行わなかった日数のランキングを表示します。</td>
  </tr>
</table>

<table>
  <tr>
    <th>悪習慣登録</th>
  </tr>
  <tr>
    <td><img width="800" alt="Image" src="https://github.com/user-attachments/assets/c448d253-b6d5-40c6-8a17-cb90e6d44ce4" /></td>
  </tr>
  <tr>
    <td>取り除きたい悪習慣を登録します。何日連続で行わないことを目標にするか設定し、目標達成を目指しましょう。</td>
  </tr>
</table>

<table>
  <tr>
    <th colspan="2">Xシェア</th>
  </tr>
  <tr>
    <td><img width="400" alt="CleanShot 2026-01-14 at 10 09 33@2x" src="https://github.com/user-attachments/assets/be462ebe-4db5-4d02-9815-32844d5d0027" /></td>
    <td><img width="400" alt="Image" src="https://github.com/user-attachments/assets/8776e077-aa65-4309-b640-29f2c220f188" /></td>
  </tr>
  <tr>
    <td colspan="2">Xシェアを通して悪習慣を取り除く宣言ができます</td>
  </tr>
</table>

<table>
  <tr>
    <th colspan="2">LINE通知</th>
  </tr>
  <tr>
    <td><img width="400" alt="CleanShot 2026-01-14 at 10 36 25@2x" src="https://github.com/user-attachments/assets/f4023622-f9c1-4495-9211-6815962218eb" /></td>
    <td><img width="400" alt="Image" src="https://github.com/user-attachments/assets/060b9806-8a7a-420f-92af-d13c03f9d795" /></td>
  </tr>
  <tr>
    <td colspan="2">特定の悪習慣に対してLINEに通知することができます。<br>悪習慣が行われそうな時刻の少し前に設定しておくことでリマインド効果も期待できます。</td>
  </tr>
</table>

<table>
  <tr>
    <th>毎日の習慣記録</th>
  </tr>
  <tr>
    <td><img width="800" alt="Image" src="https://github.com/user-attachments/assets/afabe4d6-d705-49b6-b403-dd735aa804c5" /></td>
  </tr>
  <tr>
    <td>投稿した悪習慣に対して、1日1回行わなかったかどうかの記録を行えます。<br>毎日続けることで連続達成日数がカウントされていきます。</td>
  </tr>
</table>

<table>
  <tr>
    <th>ヒートマップ</th>
  </tr>
  <tr>
    <td><img width="800" alt="Image" src="https://github.com/user-attachments/assets/6e95872d-7f4b-439d-92ee-e1e78d7c006e" /></td>
  </tr>
  <tr>
    <td>悪習慣を行わなかった日を視覚的に確認できます。<br>連続記録を途切れさせたくないという抵抗感を味方に目標達成の手助けをしてくれます。</td>
  </tr>
</table>

<table>
  <tr>
    <th>目標達成</th>
  </tr>
  <tr>
    <td><img width="800" alt="Image" src="https://github.com/user-attachments/assets/637cb413-df8e-44e6-829e-3241fb3b83f1" /></td>
  </tr>
  <tr>
    <td>目標を達成すると、投稿に対してバッジが付与されます。<br>1つの通過点として達成感を味わえます。</td>
  </tr>
</table>

<table>
  <tr>
    <th>リアクション</th>
  </tr>
  <tr>
    <td><img width="800" alt="Image" src="https://github.com/user-attachments/assets/88f9d1e4-dc20-43a2-b3c4-97c09799aac7" /></td>
  </tr>
  <tr>
    <td>悪習慣に対してリアクションを送ることで、ユーザー同士で見守り合えます。<br>適度な緊張感と応援が、目標達成の手助けとなります。</td>
  </tr>
</table>

<table>
  <tr>
    <th>コメント</th>
  </tr>
  <tr>
    <td><img width="800" alt="Image" src="https://github.com/user-attachments/assets/eed52538-55bf-4dca-9be7-432217745171" /></td>
  </tr>
  <tr>
    <td>悪習慣に対してコメントを行い、ユーザーとコミュニケーションをとることができます。</td>
  </tr>
</table>

<table>
  <tr>
    <th>ブックマーク</th>
  </tr>
  <tr>
    <td><img width="800" alt="Image" src="https://github.com/user-attachments/assets/85954122-5edd-470d-b41f-68acdbb7d352" /></td>
  </tr>
  <tr>
    <td>同じ悪習慣を取り除こうとしている投稿や、特に監視したい投稿に関してブックマークをすることができます。</td>
  </tr>
</table>

## ■ サービスの差別化ポイント・推しポイント
複数の類似サービスを使用してみたのですが、個人利用のみのアプリとなっており、他のユーザーに悪習慣をシェアする機能はありませんでした。
Anti Habitsは他のユーザーから擬似的に監視されている感覚を味わえることが他のサービスとの差別化ポイントとなります。

## 技術構成
| カテゴリ | 使用技術 | 
| --- | --- | 
| フロントエンド | Tailwind CSS / DaisyUI / Hotwire | 
| バックエンド | Ruby 3.3.6 / Rails 7.2.1 | 
| インフラ | Render / Cloudinary(動的OGP画像生成) | 
| データベース | PostgreSQL |
| 環境構築 | Docker | 
| CI/CD | GitHub Actions | 

### 主要なGem/外部サービスと用途
#### 認証・セキュリティ
* Devise - ユーザー認証機能（メール/パスワード認証、パスワードリセット）
* OmniAuth(OmniAuth Line) - LINEによる外部認証

#### データ検索・表示
* Ransack - 悪習慣一覧の検索・絞り込み機能
* Kaminari - ページネーション

#### UI/UXデザイン
* Tailwind CSS / DaisyUI - UIデザイン・スタイリング
* Hotwire - 非同期通信の簡易化とインタラクティブな機能

#### フロントエンドツール
* Esbuild - JavaScriptバンドラー
* Stimulus Autocomplete - 悪習慣一覧検索部分のオートコンプリート機能
* Tagify - タグのオートコンプリート機能, 直感的なタグ入力補助

#### データ可視化
* ECharts (Rails Charts) - 悪習慣詳細ページのカレンダーチャート表示

#### 非同期処理
* Redis - Jobキュー管理のためのインメモリデータベース
* Sidekiq - キューバックエンド

#### 外部サービス連携
* Cloudinary - 動的OGP画像生成
* LINE Messagin API- LINE通知
* XServer - 独自ドメイン

### その他
* Bullet - N+1検出
* SimpleCov - テストカバレッジ計算

## ER図
```mermaid
erDiagram
    users {
        int id PK "ID"
        string email "メールアドレス"
        string encrypted_password "暗号化されたパスワード"
        string reset_password_token "パスワードリセット時に使用するトークン"
        datetime reset_password_sent_at "パスワードリセットメールを送信した日時"
        datetime remember_created_at "ログインを維持する機能に使用する"
        string provider "OAuthプロバイダ名(LINE)"
        string uid "LINEユーザーの特定に使用する"
        string name "ユーザー表示名"
        datetime created_at "作成日時"
        datetime updated_at "更新日時"
    }

    anti_habits {
        int id PK "ID"
        int user_id FK "ユーザーID"
        string title "悪習慣のタイトル"
        text description "悪習慣の説明"
        int comments_count "コメント数(デフォルト:0)"
        boolean is_public "公開設定(デフォルト:true)"
        int goal_days "目標日数"
        boolean goal_achieved "目標達成フラグ(デフォルト:false)"
        datetime created_at "作成日時"
        datetime updated_at "更新日時"
    }

    reactions {
        int id PK "ID"
        int user_id FK "リアクションをしたユーザーID"
        int anti_habit_id FK "対象の悪習慣ID"
        int reaction_kind "リアクションの種類(デフォルト:0)"
        datetime created_at "作成日時"
        datetime updated_at "更新日時"
    }

    comments {
        int id PK "ID"
        int user_id FK "コメントをしたユーザーID"
        int anti_habit_id FK "対象の悪習慣ID"
        text body "コメント本文"
        datetime created_at "作成日時"
        datetime updated_at "更新日時"
    }

    tags {
        bigint id PK "ID"
        string name "タグ名"
        datetime created_at "作成日時"
        datetime updated_at "更新日時"
    }

    anti_habit_tags {
        int id PK "ID"
        int anti_habit_id FK "対象の悪習慣ID"
        int tag_id FK "タグID"
        datetime created_at "作成日時"
        datetime updated_at "更新日時"
    }

    anti_habit_records {
        int id PK "ID"
        int anti_habit_id FK "対象の悪習慣ID"
        date recorded_on "記録日"
        datetime created_at "作成日時"
        datetime updated_at "更新日時"
    }

    bookmarks {
        int id PK "ID"
        int user_id FK "ブックマークしたユーザーID"
        int anti_habit_id FK "対象の悪習慣ID"
        datetime created_at "作成日時"
        datetime updated_at "更新日時"
    }

    notification_settings {
        int id PK "ID"
        int anti_habit_id FK "対象の悪習慣ID"
        time notification_time "通知時刻"
        boolean notify_on_reaction "リアクション時の通知設定"
        boolean notify_on_comment "コメント時の通知設定"
        boolean notification_enabled "通知有効化フラグ(デフォルト:false)"
        datetime created_at "作成日時"
        datetime updated_at "更新日時"
    }

    %% リレーション(1:N)
    users ||--o{ anti_habits : "1:多"
    users ||--o{ reactions : "1:多"
    users ||--o{ comments : "1:多"

    anti_habits ||--o{ reactions : "1:多"
    anti_habits ||--o{ comments : "1:多"
    anti_habits ||--o{ anti_habit_tags : "1:多"
    anti_habits ||--o{ anti_habit_records : "1:多"
    anti_habits ||--o{ bookmarks : "1:多"
    anti_habits ||--|| notification_settings : "1:1"

    tags ||--o{ anti_habit_tags : "1:多"

```

## 画面遷移図
Figma：https://www.figma.com/design/5EIKs4ZNjtIcXsfwtx5yOk/test-Project?node-id=74-2&t=NkVOgwoO1YP3TxIm-1