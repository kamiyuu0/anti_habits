<div class="card bg-base-100 shadow-xl mb-4 hover:shadow-2xl transition-shadow rounded-2xl border border-base-300">
  <div class="card-body">
    <!-- ヘッダー部分：ユーザー名と作成日 -->
    <div class="flex items-center justify-between mb-4">
      <div class="flex items-center">
          <i class="fas fa-user text-sm mr-2"></i>
          <div>
            <span class="font-semibold"><%= anti_habit.user.name %></span>
          </div>
      </div>

      <!-- 非公開バッジ（作成者本人のみ表示） -->
      <% if current_user&.own?(anti_habit) && !anti_habit.is_public %>
        <div class="badge badge-warning text-[8px] sm:text-sm">
          非公開
        </div>
      <% end %>
    </div>

    <!-- タイトル -->
    <div class="mb-3">
      <h3 class="card-title text-lg mb-2">
        <%= link_to anti_habit_path(anti_habit), class: "link link-hover" do %>
          <%= anti_habit.title %>
        <% end %>
      </h3>
      <div class="flex justify-start gap-2">
        <div class="badge badge-success badge-lg">
          連続<%= anti_habit.consecutive_days_achieved %>日達成！
        </div>

        <% if anti_habit.goal_achieved? %>
          <div class="badge badge-warning badge-lg flex items-center gap-1">
            <i class="fas fa-trophy text-xs"></i>
            目標達成
          </div>
        <% end %>
      </div>
    </div>

    <!-- 説明文（省略表示） -->
    <% if anti_habit.description.present? %>
      <p class="text-base-content/70 mb-4">
        <%= truncate(anti_habit.description, length: 80) %>
      </p>
    <% end %>

    <!-- タグ -->
    <% if anti_habit.tags.any? %>
      <div class="mb-4">
        <div class="flex flex-wrap gap-2">
          <% anti_habit.tags.first(3).each do |tag| %>
            <div class="badge badge-outline badge-primary">
              <%= link_to anti_habits_path(q: { tags_name_in: tag.name }) do %>
                #<%= tag.name %>
              <% end %>
            </div>
          <% end %>
          <% if anti_habit.tags.size > 3 %>
            <div class="badge badge-ghost">
              +<%= anti_habit.tags.size - 3 %>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>

    <!-- リアクションボタン -->
    <% if user_signed_in? %>
      <div class="flex items-center mt-4 space-x-1">
        <%= render "shared/reaction_button", anti_habit: anti_habit %>
        <div class="flex items-center space-x-1">
          <i class="fas fa-comment"></i>
          <%= anti_habit.comments_count %>
        </div>
        <% if current_user.can_bookmark?(anti_habit) %>
          <%= render "shared/bookmark_button", anti_habit: anti_habit %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>