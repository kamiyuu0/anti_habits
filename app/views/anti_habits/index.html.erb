<div class="container mx-auto px-4 py-6">
  <div class="mb-8">
    <h1 class="text-4xl font-bold text-center mb-4">
      悪習慣一覧<br class="sm:hidden"><%= @tag_name.presence ? " (#{@tag_name})" : "" %>
    </h1>
    <% if @tag_name.presence %>
      <div class="mt-2 mb-2 text-center">
        <%= link_to "タグフィルタを解除", anti_habits_path, class: "btn btn-sm" %>
      </div>
    <% end %>
    <p class="text-center text-base-content/70">みんなが克服したい悪習慣を見てみましょう</p>
  </div>

  <!-- 検索フォーム -->
  <div class="mb-6">
    <%= search_form_for @q, url: anti_habits_path, method: :get, class: "max-w-2xl mx-auto" do |f| %>
      <div class="join w-full">
        <%= f.search_field :title_or_description_cont,
            placeholder: "タイトルか説明文で検索...",
            class: "input input-bordered join-item w-full",
            value: params.dig(:q, :title_or_description_cont) %>
        <%= f.submit "検索", class: "btn btn-primary join-item" %>
      </div>
      <% if params[:q].present? %>
        <div class="mt-2 text-center">
          <%= link_to "検索をクリア", anti_habits_path(tag: @tag_name), class: "btn btn-sm btn-ghost" %>
        </div>
      <% end %>
    <% end %>
  </div>



  <!-- 悪習慣一覧 -->
  <div class="space-y-6">
    <% if @anti_habits.any? %>
      <% @anti_habits.each do |anti_habit| %>
        <%= render 'anti_habit', anti_habit: anti_habit %>
      <% end %>
    <% else %>
      <!-- 空の状態 -->
      <div class="hero min-h-96">
        <div class="hero-content text-center">
          <div class="max-w-md">
            <div class="mb-6">
              <svg class="mx-auto w-24 h-24 text-base-content/30" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
              </svg>
            </div>
            <h3 class="text-2xl font-bold mb-4">
              <% if params[:q].present? %>
                検索結果が見つかりませんでした
              <% else %>
                まだ悪習慣が投稿されていません
              <% end %>
            </h3>
            <p class="mb-6">
              <% if params[:q].present? %>
                検索条件を変更して再度お試しください
              <% else %>
                最初の悪習慣を登録して、目標達成への第一歩を踏み出しましょう
              <% end %>
            </p>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <!-- ページネーション -->
  <%= paginate @anti_habits %>
</div>